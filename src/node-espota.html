<script type="text/javascript">
  RED.nodes.registerType("node-espota", {
    category: "espota",
    color: "rgb(51, 204, 204)",
    defaults: {
      firmwareLink: {
        required: true,
        value:
          "https://github.com/andrei-tatar/ha-wifi-switch/releases/latest/download/ha_switch_esp32.bin",
      },
      extractHost: {
        required: true,
        value: "^(.+)\/version$",
      },
      excludeHost: {
        value: "",
      },
      transform: {
        value: "$1.local",
      },
      name: {
        value: "",
      },
    },
    inputs: 1,
    outputs: 0,
    paletteLabel: "espota",
    label: function () {
      return this.name || "espota";
    },
  });
</script>

<script type="text/x-red" data-template-name="node-espota">
  <div class="form-row">
      <label for="node-input-firmwareLink"><i class="fa fa-download"></i> Firmware</label>
      <input type="text" id="node-input-firmwareLink">
  </div>
  <div class="form-row">
      <label for="node-input-extractHost"><i class="fa fa-plus"></i> Extract</label>
      <input type="text" id="node-input-extractHost">
  </div>
  <div class="form-row">
    <label for="node-input-excludeHost"><i class="fa fa-minus"></i> Exclude</label>
    <input type="text" id="node-input-excludeHost">
  </div>
  <div class="form-row">
      <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
      <input type="text" id="node-input-name">
  </div>
</script>

<script type="text/x-red" data-help-name="node-espota"></script>
